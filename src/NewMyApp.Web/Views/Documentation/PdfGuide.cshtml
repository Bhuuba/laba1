@{
    ViewData["Title"] = "–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å PDF";
}

<div class="container mt-5">
    <div class="row">
        <div class="col-md-3">
            <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
            <div class="list-group mb-4 sticky-top" style="top: 2rem;">
                <a href="#debug" class="list-group-item list-group-item-action">–û—Ç–ª–∞–¥–∫–∞ –≤ VS Code</a>
                <a href="#project-setup" class="list-group-item list-group-item-action">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞</a>
                <a href="#packages" class="list-group-item list-group-item-action">–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã</a>
                <a href="#architecture" class="list-group-item list-group-item-action">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ PDF —Å–∏—Å—Ç–µ–º—ã</a>
                <a href="#implementation" class="list-group-item list-group-item-action">–†–µ–∞–ª–∏–∑–∞—Ü–∏—è PDF</a>
                <a href="#usage" class="list-group-item list-group-item-action">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</a>
                <a href="#tips" class="list-group-item list-group-item-action">–°–æ–≤–µ—Ç—ã –∏ —Ç—Ä—é–∫–∏</a>
            </div>
        </div>
        
        <div class="col-md-9">
            <h1 class="mb-4">@ViewData["Title"]</h1>

            <!-- –û—Ç–ª–∞–¥–∫–∞ -->
            <section id="debug" class="mb-5">
                <h2 class="border-bottom pb-2">–û—Ç–ª–∞–¥–∫–∞ –≤ Visual Studio Code</h2>
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–ª–∞–¥–∫–∏</h5>
                        <ol>
                            <li>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ C# –¥–ª—è VS Code</li>
                            <li>–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∑–∞–ø—É—Å–∫–∞ (.vscode/launch.json)</li>
                            <li>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ (breakpoints) –≤ –∫–æ–¥</li>
                            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ F5 –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ—Ç–ª–∞–¥–∫–∏</li>
                        </ol>
                        <div class="alert alert-info">
                            <strong>–°–æ–≤–µ—Ç:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∫–ª–∞–≤–∏—à Shift+F5 –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç–ª–∞–¥–∫–∏, F10 –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
                        </div>
                    </div>
                </div>
            </section>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ -->
            <section id="project-setup" class="mb-5">
                <h2 class="border-bottom pb-2">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞</h2>
                <div class="alert alert-warning">
                    <strong>–í–∞–∂–Ω–æ!</strong> –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω .NET SDK 6.0 –∏–ª–∏ –≤—ã—à–µ.
                </div>
                <h4>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:</h4>
                <pre class="bg-light p-3 rounded">
NewMyApp/
‚îú‚îÄ‚îÄ NewMyApp.Core/
‚îÇ   ‚îî‚îÄ‚îÄ Services/
‚îÇ       ‚îú‚îÄ‚îÄ IPdfService.cs
‚îÇ       ‚îî‚îÄ‚îÄ ICertificateService.cs
‚îú‚îÄ‚îÄ NewMyApp.Infrastructure/
‚îÇ   ‚îî‚îÄ‚îÄ Services/
‚îÇ       ‚îú‚îÄ‚îÄ PdfService.cs
‚îÇ       ‚îî‚îÄ‚îÄ CertificateService.cs
‚îî‚îÄ‚îÄ NewMyApp.Web/
    ‚îî‚îÄ‚îÄ Controllers/
        ‚îî‚îÄ‚îÄ RatingController.cs</pre>
            </section>

            <!-- –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã -->
            <section id="packages" class="mb-5">
                <h2 class="border-bottom pb-2">–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã</h2>
                <div class="card mb-4">
                    <div class="card-body">
                        <h5>–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:</h5>
                        <ul>
                            <li>
                                <strong>QuestPDF (2025.4.0)</strong>
                                <p>–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–º Fluent API.</p>
                            </li>
                        </ul>
                        <div class="bg-light p-3 rounded">
                            <code>dotnet add package QuestPDF --version 2025.4.0</code>
                        </div>
                    </div>
                </div>
            </section>

            <!-- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ -->
            <section id="architecture" class="mb-5">
                <h2 class="border-bottom pb-2">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ PDF —Å–∏—Å—Ç–µ–º—ã</h2>
                <div class="card mb-4">
                    <div class="card-body">
                        <h5>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:</h5>
                        <ol>
                            <li>
                                <strong>IPdfService</strong>
                                <p>–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å PDF.</p>
                            </li>
                            <li>
                                <strong>ICertificateService</strong>
                                <p>–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.</p>
                            </li>
                            <li>
                                <strong>PdfService</strong>
                                <p>–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.</p>
                            </li>
                            <li>
                                <strong>RatingController</strong>
                                <p>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Ä–µ–π—Ç–∏–Ω–≥–∞.</p>
                            </li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è -->
            <section id="implementation" class="mb-5">
                <h2 class="border-bottom pb-2">–†–µ–∞–ª–∏–∑–∞—Ü–∏—è PDF</h2>
                <div class="card mb-4">
                    <div class="card-body">
                        <h5>–û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:</h5>
                        <ol>
                            <li>
                                <strong>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DI –≤ Startup.cs</strong>
                                <pre class="bg-light p-3 rounded">
services.AddScoped<IPdfService, PdfService>();
services.AddScoped<ICertificateService, CertificateService>();</pre>
                            </li>
                            <li>
                                <strong>–°–æ–∑–¥–∞–Ω–∏–µ PDF –¥–æ–∫—É–º–µ–Ω—Ç–∞</strong>
                                <pre class="bg-light p-3 rounded">
var pdf = Document.Create(container => {
    container.Page(page => {
        page.Size(PageSizes.A4);
        page.Margin(2, Unit.Centimetre);
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    });
});</pre>
                            </li>
                            <li>
                                <strong>–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞</strong>
                                <pre class="bg-light p-3 rounded">
// –ó–∞–≥–æ–ª–æ–≤–æ–∫
page.Header().Row(row => {
    row.RelativeItem().Background(Colors.Blue.Lighten3)
       .Padding(20).Column(col => {
        col.Item().AlignCenter()
           .Text("–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç")
           .FontSize(36);
    });
});</pre>
                            </li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ -->
            <section id="usage" class="mb-5">
                <h2 class="border-bottom pb-2">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</h2>
                <div class="card mb-4">
                    <div class="card-body">
                        <h5>–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:</h5>
                        <ol>
                            <li>
                                <strong>–í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ:</strong>
                                <pre class="bg-light p-3 rounded">
public async Task<IActionResult> DownloadTopUserPdf()
{
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞
    QuestPDF.Settings.License = LicenseType.Community;

    // –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    var pdf = Document.Create(container => {
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    });

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤–æ–∑–≤—Ä–∞—Ç
    var stream = new MemoryStream();
    pdf.GeneratePdf(stream);
    return File(stream, "application/pdf", "certificate.pdf");
}</pre>
                            </li>
                        </ol>

                        <h5>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Å—Ç–∏–ª–µ–π:</h5>
                        <pre class="bg-light p-3 rounded">
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏
col.Item().AlignCenter().Text("üèÜ").FontSize(50);

// –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
col.Item().AlignCenter()
   .Text("User Name")
   .FontSize(28)
   .FontColor(Colors.Blue.Darken2);</pre>
                    </div>
                </div>
            </section>

            <!-- –°–æ–≤–µ—Ç—ã -->
            <section id="tips" class="mb-5">
                <h2 class="border-bottom pb-2">–°–æ–≤–µ—Ç—ã –∏ —Ç—Ä—é–∫–∏</h2>
                <div class="card mb-4">
                    <div class="card-body">
                        <h5>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</h5>
                        <ul>
                            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MemoryStream –≤–º–µ—Å—Ç–æ FileStream –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</li>
                            <li>–ò–∑–±–µ–≥–∞–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö PDF</li>
                            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</li>
                        </ul>

                        <h5>–°–æ–≤–µ—Ç—ã –ø–æ –¥–∏–∑–∞–π–Ω—É:</h5>
                        <ul>
                            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–¥–∏–Ω—É—é —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É</li>
                            <li>–°–æ–±–ª—é–¥–∞–π—Ç–µ –∏–µ—Ä–∞—Ä—Ö–∏—é —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤</li>
                            <li>–î–æ–±–∞–≤–ª—è–π—Ç–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏</li>
                            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –∏ –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞</li>
                        </ul>

                        <div class="alert alert-success">
                            <strong>Best Practice:</strong> –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π PDF –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏ –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞—Ö.
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ä–∞–∑–¥–µ–ª–∞–º
        document.querySelectorAll('.list-group-item').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
        window.addEventListener('scroll', function() {
            let sections = document.querySelectorAll('section');
            let navItems = document.querySelectorAll('.list-group-item');
            
            sections.forEach((section, i) => {
                let top = section.offsetTop - 100;
                let bottom = top + section.offsetHeight;
                
                if (window.scrollY >= top && window.scrollY < bottom) {
                    navItems.forEach(item => item.classList.remove('active'));
                    navItems[i].classList.add('active');
                }
            });
        });
    </script>
}

@section Styles {
    <style>
        .sticky-top {
            top: 2rem;
        }

        section {
            scroll-margin-top: 2rem;
        }

        .list-group-item.active {
            background-color: #0d6efd;
            color: white;
            border-color: #0d6efd;
        }

        pre {
            max-height: 300px;
            overflow-y: auto;
        }

        code {
            color: #d63384;
        }
    </style>
}